---
// src/pages/index.astro
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Our Love Calculation ‚ù§Ô∏è</title>
		<!-- Google Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Pacifico&display=swap" rel="stylesheet">
	</head>
	<body>
		<div id="hearts-container" class="hearts-container"></div>

		<main>
			<!-- STEP 1: QUIZ -->
			<div id="quiz-section" class="card">
				<h1 id="quiz-title" class="title">Compatibility Quiz</h1>
				<div class="progress-bar">
					<div id="progress-fill" class="progress-fill"></div>
				</div>
				
				<div id="question-container" class="content">
					<!-- Questions injected via JS -->
				</div>
			</div>

			<!-- STEP 2: CALCULATING -->
			<div id="calculating-section" class="card hidden">
				<div class="content">
					<h1 class="title">Calculating Compatibility...</h1>
					<div class="love-meter-container">
						<div class="love-meter-fill" id="love-meter-fill">0%</div>
					</div>
					<p id="calculating-text" class="subtitle">Analyzing joy factors...</p>
					
					<div class="fun-fact-box">
						<h3>Did you know? üìú</h3>
						<p>The phrase "From your Valentine" comes from a legend about St. Valentine himself. Imprisoned for secretly marrying couples, he fell in love with the jailer's daughter and wrote her a farewell letter signed "From your Valentine" ‚Äî the world's first Valentine card!</p>
					</div>

					<button id="see-results-btn" class="option-btn hidden" style="margin: 1.5rem auto 0 auto; width: auto; padding: 1rem 2rem;">See Results üíò</button>
				</div>
			</div>

			<!-- STEP 3: PROPOSAL (Original App) -->
			<div id="proposal-section" class="card hidden">
				<div class="content">
					<div id="result-badge" class="badge hidden">Match: 1000% ‚ù§Ô∏è</div>
					<p class="subtitle">Science says we're perfect together!</p>
					
					<p style="font-size: 1.5rem; margin: 1rem 0; font-family: 'Pacifico', cursive; color: var(--primary);">So....</p>
					
					<h1 id="proposal-title" class="title">Will you be my Valentine? üåπ</h1>
					
					<div class="gif-container">
						<img id="main-gif" src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExM3R6eW55b3R6eW55b3R6eW55b3R6eW55b3R6eW55b3R6eW55b3/uTj883pL53y4t8q2pC/giphy.gif" alt="Cute puppy" />
					</div>

					<div class="buttons">
						<button id="yes-btn" class="btn btn-yes">Yes, definitely!</button>
						<button id="no-btn" class="btn btn-no">No</button>
					</div>
				</div>
			</div>

			<!-- STEP 4: SUCCESS -->
			<div id="success-section" class="card hidden">
				<div class="content">
					<h1 class="title">Yay! ‚ù§Ô∏è</h1>
					<p id="success-message" class="subtitle">Best decision ever! See you on the 14th!</p>
					<div class="image-container">
						<img src="/assets/aww-blushing.gif" alt="Happy dance" class="success-gif"/>
					</div>
					
					<p class="save-date-text">Save the date</p>
					<div class="calendar-actions">
						<button id="google-cal-btn" class="btn-cal">Google Calendar</button>
						<button id="apple-cal-btn" class="btn-cal">Apple Calendar</button>
					</div>

					<button id="reset-btn" class="btn-reset">Start Over üîÑ</button>
				</div>
			</div>
		</main>

		<script>
			import confetti from 'canvas-confetti';

			// --- URL PARAMS FOR PERSONALIZATION ---
			const urlParams = new URLSearchParams(window.location.search);
			const partnerName = urlParams.get('name');

			if (partnerName) {
				document.title = `Question for ${partnerName} ‚ù§Ô∏è`;
				
				const quizTitle = document.getElementById('quiz-title');
				if (quizTitle) quizTitle.innerText = `Compatibility Quiz for ${partnerName} ‚ù§Ô∏è`;

				const proposalTitle = document.getElementById('proposal-title');
				if (proposalTitle) proposalTitle.innerText = `Will you be my Valentine? üåπ`; // No change needed here logically based on previous reorder, but good to keep clean

				const successMessage = document.getElementById('success-message');
				if (successMessage) successMessage.innerText = `Best decision ever, ${partnerName}! See you on the 14th!`;
			}


			// --- STATE MANAGEMENT ---
			const state = {
				currentQuestionIndex: 0,
				answers: []
			};

			// --- DOM ELEMENTS ---
			const quizSection = document.getElementById('quiz-section');
			const calculatingSection = document.getElementById('calculating-section');
			const proposalSection = document.getElementById('proposal-section');
			const successSection = document.getElementById('success-section');
			
			const questionContainer = document.getElementById('question-container');
			const progressFill = document.getElementById('progress-fill');
			
			const yesBtn = document.getElementById('yes-btn');
			const noBtn = document.getElementById('no-btn');
			const mainGif = document.getElementById('main-gif') as HTMLImageElement;

			// --- DATA ---
			const questions = [
				{
					question: "How many times a day do I make you smile or laugh? üòÑ",
					gif: "/assets/el-risitas-juan-joya-borja.gif", // El Risitas Unique
					options: [
						"A ridiculous amount",
						"Are you kidding? Constantly!",
						"Every single time we talk",
						"Too many to count"
					],
					reaction: "Your daily joy factor is off the charts! üìà"
				},
				{
					question: "What quality of mine do you appreciate? üçå",
					gif: "/assets/minions-cartoon.gif",
					options: [
						"Your kindness & care",
						"Your humour",
						"Your loyalty & reliability",
						"Your inspiring passion"
					],
					reaction: "You make me a better person! üíñ"
				},
				{
					question: "What's our most iconic moment? üì∏",
					gif: "/assets/peachugomu-gif.gif",
					options: [
						"Our first date ü•Ç",
						"Our trips together ‚úàÔ∏è",
						"Cooking together üç≥",
						"Every single moment ‚ú®"
					],
					reaction: "Every moment with you is my favorite! üì∏"
				},
				{
					question: "If we were a movie genre, what would we be? üé¨",
					gif: "/assets/movie.gif",
					options: [
						"Romantic Comedy",
						"Epic Adventure",
						"Fairytale Romance",
						"All of the above"
					],
					reaction: "A perfect love story! ‚ú®"
				}
			];

			// --- FUNCTIONS ---

			function renderQuestion() {
				if (!questionContainer || !progressFill) return;

				const q = questions[state.currentQuestionIndex];
				
				// Update Progress
				const progress = ((state.currentQuestionIndex) / questions.length) * 100;
				progressFill.style.width = `${progress}%`;

				// Render
				questionContainer.innerHTML = `
					<h2 class="question-text">${q.question}</h2>
					${q.gif ? `<div class="question-gif-container"><img src="${q.gif}" class="question-gif" alt="Question GIF" /></div>` : ''}
					<div class="options-grid">
						${q.options.map((opt, idx) => `
							<button class="option-btn" data-idx="${idx}">${opt}</button>
						`).join('')}
					</div>
				`;

				// Attach listeners
				document.querySelectorAll('.option-btn').forEach(btn => {
					btn.addEventListener('click', () => showFeedback());
				});
			}

			function showFeedback() {
				if (!questionContainer) return;
				
				const q = questions[state.currentQuestionIndex];
				const randomPoints = Math.floor(Math.random() * 50) + 100; // 100-150 points
				const isLast = state.currentQuestionIndex === questions.length - 1;
				const btnText = isLast ? "Calculate Results üíò" : "Next Question ‚û°Ô∏è";

				// Render Feedback View
				questionContainer.innerHTML = `
					<div class="feedback-content">
						<h2 class="points-text">+${randomPoints} Hearts! ‚ù§Ô∏è</h2>
						${q.gif ? `<img src="${q.gif}" class="feedback-gif" alt="Reaction GIF" />` : ''}
						<p class="reaction-text">${q.reaction}</p>
						<button id="next-question-btn" class="option-btn" style="margin: 0 auto; margin-top: 1rem;">${btnText}</button>
					</div>
				`;

				// Attach listener to Next button
				document.getElementById('next-question-btn')?.addEventListener('click', () => handleNext());
				
				// Small confetti for quick dopamine
				confetti({
					particleCount: 30,
					spread: 50,
					origin: { y: 0.7 },
					colors: ['#ff4d6d', '#ff8fa3', '#ffffff']
				});
			}

			function handleNext() {
				state.currentQuestionIndex++;
				
				if (state.currentQuestionIndex < questions.length) {
					renderQuestion();
				} else {
					startCalculation();
				}
			}

			function startCalculation() {
				if(quizSection) quizSection.classList.add('hidden');
				if(calculatingSection) calculatingSection.classList.remove('hidden');

				const meterFill = document.getElementById('love-meter-fill');
				const text = document.getElementById('calculating-text');
				const resultsBtn = document.getElementById('see-results-btn');
				
				let percent = 0;
				const interval = setInterval(() => {
					percent += Math.floor(Math.random() * 4) + 1;
					if (percent > 100) percent = 100;
					
					if (meterFill) {
						meterFill.style.width = `${percent}%`;
						meterFill.innerText = `${percent}%`;
					}

					// Random flavor text
					if (percent > 20 && percent < 40 && text) text.innerText = "Analyzing laughter frequency...";
					if (percent > 50 && percent < 70 && text) text.innerText = "Measuring cuddle density...";
					if (percent > 80 && text) text.innerText = "Computing soulmate status...";

					if (percent >= 100) {
						clearInterval(interval);
						if (text) text.innerText = "Analysis Complete! Here's a fun fact...";
						
						// Explosion effect!
						confetti({
							particleCount: 100,
							spread: 70,
							origin: { y: 0.6 }
						});
						
						// Show manual button
						if (resultsBtn) {
							resultsBtn.classList.remove('hidden');
							// Define handler to clear timeout
							const clickHandler = () => {
								clearTimeout(autoAdvance);
								showProposal();
							};
							resultsBtn.addEventListener('click', clickHandler, { once: true });
						}
						
						// Auto advance after 10s (gives time to read)
						const autoAdvance = setTimeout(showProposal, 10000);
					}
				}, 60);
			}

			function showProposal() {
				if(calculatingSection) calculatingSection.classList.add('hidden');
				if(proposalSection) {
					proposalSection.classList.remove('hidden');
					const badge = document.getElementById('result-badge');
					if(badge) badge.classList.remove('hidden');
					
					// Ensure main gif is set to happy start state
					if(mainGif) mainGif.src = HAPPY_GIF;
				}
			}

			// --- PROPOSAL LOGIC (Previous Code) ---
			const HAPPY_GIF = "/assets/bemy-valentine.gif";
			const SAD_GIF = "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExM3R6eW55b3R6eW55b3R6eW55b3R6eW55b3R6eW55b3R6eW55b3/OPU6wzx8JrHna/giphy.gif";

			// Spawn a new YES button
			const spawnYesButton = () => {
				const btn = document.createElement('button');
				btn.innerText = "Yes, definitely!";
				btn.className = "btn btn-yes";
				btn.style.position = "fixed";
				btn.style.zIndex = "100";
				
				// Random position
				const x = Math.random() * (window.innerWidth - 150);
				const y = Math.random() * (window.innerHeight - 50);
				btn.style.left = `${x}px`;
				btn.style.top = `${y}px`;
				
				// Add click handler to win
				btn.addEventListener('click', handleSuccess);
				
				document.body.appendChild(btn);
			};

			const handleSuccess = () => {
				localStorage.setItem('valentine_accepted', 'true'); // Save state

				if(proposalSection) proposalSection.style.display = 'none';
				if(successSection) successSection.classList.remove('hidden');

				// Remove all spawned buttons
				document.querySelectorAll('.btn-yes').forEach(b => {
					if(b.style.position === 'fixed') b.remove();
				});

				const duration = 15 * 1000;
				const animationEnd = Date.now() + duration;
				const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };
				const randomInRange = (min, max) => Math.random() * (max - min) + min;

				const interval = setInterval(function() {
					const timeLeft = animationEnd - Date.now();
					if (timeLeft <= 0) return clearInterval(interval);
					const particleCount = 50 * (timeLeft / duration);
					confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } });
					confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } });
				}, 250);
			};

			// No button spawns more Yes buttons
			noBtn?.addEventListener('click', (e) => {
				e.preventDefault();
				if (mainGif) mainGif.src = SAD_GIF;
				spawnYesButton();
			});

			// Yes button wins
			yesBtn?.addEventListener('click', handleSuccess);

			// --- CALENDAR LOGIC ---
			const googleBtn = document.getElementById('google-cal-btn');
			const appleBtn = document.getElementById('apple-cal-btn');
			
			const eventDetails = {
				title: "Valentine's Date Night ‚ù§Ô∏è",
				details: "The best date night ever!",
				location: "Everywhere",
				start: "20260214T190000", // Feb 14 2026, 7 PM
				end: "20260214T230000"
			};

			googleBtn?.addEventListener('click', () => {
				const url = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(eventDetails.title)}&details=${encodeURIComponent(eventDetails.details)}&location=${encodeURIComponent(eventDetails.location)}&dates=${eventDetails.start}/${eventDetails.end}`;
				window.open(url, '_blank');
			});

			appleBtn?.addEventListener('click', () => {
				const icsContent = `BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
URL:${document.URL}
DTSTART:${eventDetails.start}
DTEND:${eventDetails.end}
SUMMARY:${eventDetails.title}
DESCRIPTION:${eventDetails.details}
LOCATION:${eventDetails.location}
END:VEVENT
END:VCALENDAR`;

				const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
				const link = document.createElement('a');
				link.href = window.URL.createObjectURL(blob);
				link.setAttribute('download', 'valentines-date.ics');
				document.body.appendChild(link);
				link.click();
				document.body.removeChild(link);
			});

			// Reset / Start Over
			const resetBtn = document.getElementById('reset-btn');
			resetBtn?.addEventListener('click', () => {
				localStorage.removeItem('valentine_accepted');
				window.location.reload();
			});

			// --- INIT ---
			// Check for saved success state
			if (localStorage.getItem('valentine_accepted') === 'true') {
				if(quizSection) quizSection.classList.add('hidden');
				if(successSection) successSection.classList.remove('hidden');
			} else {
				renderQuestion();
			}

			// --- HEARTS & ROSES BACKGROUND ---
			const heartsContainer = document.getElementById('hearts-container');
			const createFallingElement = () => {
				const element = document.createElement('div');
				element.classList.add('heart');
				// Randomly choose between Heart and Rose
				element.innerHTML = Math.random() > 0.5 ? '‚ù§Ô∏è' : 'üåπ';
				
				element.style.left = Math.random() * 100 + 'vw';
				element.style.animationDuration = Math.random() * 5 + 10 + 's'; // 10s - 15s (Much slower)
				element.style.fontSize = Math.random() * 1.5 + 0.5 + 'rem';
				
				heartsContainer?.appendChild(element);
				
				// Remove after animation (ensure timeout is longer than max animation duration)
				setTimeout(() => element.remove(), 15000);
			};
			setInterval(createFallingElement, 500); // Add new one every 500ms

		</script>
	</body>
</html>

<style is:global>
	.heart {
		position: fixed;
		top: -10vh;
		user-select: none;
		pointer-events: none;
		z-index: 0;
		animation: fall linear forwards;
		opacity: 0.7;
		/* Add a slight rotation to roses/hearts for more natural fall */
		transform: rotate(0deg); 
	}
	@keyframes fall {
		0% { transform: translateY(0) rotate(0deg); opacity: 1; }
		100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
	}

	/* QUIZ STYLES (Global for Dynamic Content) */
	.progress-bar {
		width: 100%;
		height: 8px;
		background: rgba(255, 255, 255, 0.5);
		border-radius: 4px;
		margin-bottom: 2rem;
		overflow: hidden;
	}
	
	.progress-fill {
		height: 100%;
		background: var(--primary);
		width: 0%;
		transition: width 0.3s ease;
	}

	.question-text {
		font-size: 1.4rem;
		color: var(--text);
		margin-bottom: 2rem;
		font-weight: 600;
		line-height: 1.4;
	}

	.options-grid {
		display: grid;
		grid-template-columns: 1fr 1fr; /* 2x2 Grid EVERYWHERE (Mobile included) */
		gap: 1rem;
	}
	
	/* No media query needed for grid columns anymore */

	.option-btn {
		background: rgba(255, 255, 255, 0.85);
		border: 1px solid white;
		padding: 1.2rem;
		border-radius: 16px;
		font-size: 1rem;
		color: var(--text);
		cursor: pointer;
		font-weight: 600;
		transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
		box-shadow: 0 4px 6px rgba(0,0,0,0.05);
		display: flex;
		align-items: center;
		justify-content: center;
		min-height: 80px; /* Ensure consistent height */
	}

	.option-btn:hover {
		background: white;
		border-color: var(--primary);
		transform: translateY(-3px) scale(1.02);
		box-shadow: 0 10px 20px rgba(255, 77, 109, 0.2);
		color: var(--primary);
	}

	.option-btn:active {
		transform: scale(0.98);
	}

	/* GIF STYLES */
	.question-gif-container {
		display: flex;
		justify-content: center;
		margin-bottom: 1.5rem;
	}

	.question-gif {
		max-width: 100%;
		height: 180px; /* Fixed height for consistency */
		object-fit: cover;
		border-radius: 12px;
		box-shadow: 0 4px 12px rgba(0,0,0,0.1);
	}

	.feedback-gif {
		max-width: 100%;
		height: 160px;
		border-radius: 12px;
		margin-bottom: 1rem;
		box-shadow: 0 4px 12px rgba(0,0,0,0.1);
	}

	/* FEEDBACK STATE STYLES */
	.feedback-content {
		animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
	}

	@keyframes popIn {
		from { opacity: 0; transform: scale(0.8); }
		to { opacity: 1; transform: scale(1); }
	}

	.points-text {
		font-family: 'Pacifico', cursive;
		font-size: 2.5rem;
		color: var(--primary);
		margin-bottom: 0.5rem;
		text-shadow: 2px 2px 0px white;
	}

	.reaction-text {
		font-size: 1.3rem;
		color: var(--text);
		margin-bottom: 2rem;
		line-height: 1.5;
	}

	/* PROPOSAL BUTTONS (Moved to global for dynamic access) */
	.buttons {
		display: flex;
		gap: 1.5rem;
		justify-content: center;
		align-items: center;
		position: relative;
	}

	.btn {
		border: none;
		padding: 1rem 2rem;
		font-size: 1.1rem;
		font-weight: 600;
		border-radius: 50px;
		cursor: pointer;
		transition: transform 0.2s, box-shadow 0.2s;
	}

	.btn-yes {
		background-color: var(--primary);
		color: white;
		box-shadow: 0 4px 15px rgba(255, 77, 109, 0.4);
	}

	.btn-yes:hover {
		transform: scale(1.05);
		background-color: #d90429;
		box-shadow: 0 6px 20px rgba(255, 77, 109, 0.6);
	}

	.btn-no {
		background-color: #fff0f3;
		color: var(--text);
		box-shadow: 0 4px 15px rgba(0,0,0,0.05);
	}

	/* CALENDAR BUTTONS */
	.calendar-actions {
		display: flex;
		gap: 1rem;
		justify-content: center;
		margin-top: 1.5rem;
	}

	.btn-cal {
		background: white;
		border: 1px solid var(--primary);
		color: var(--primary);
		padding: 0.8rem 1.2rem;
		border-radius: 12px;
		font-weight: 600;
		cursor: pointer;
		font-size: 0.9rem;
		display: flex;
		align-items: center;
		gap: 0.5rem;
		transition: all 0.2s;
		box-shadow: 0 4px 6px rgba(0,0,0,0.05);
	}

	.btn-cal:hover {
		background: var(--primary);
		color: white;
		transform: translateY(-2px);
		box-shadow: 0 6px 12px rgba(255, 77, 109, 0.2);
	}

	.btn-reset {
		background: transparent;
		border: 1px solid rgba(255, 77, 109, 0.3);
		color: var(--text);
		padding: 0.5rem 1rem;
		border-radius: 20px;
		font-size: 0.9rem;
		margin-top: 2rem;
		cursor: pointer;
		opacity: 0.7;
		transition: all 0.2s;
	}

	.btn-reset:hover {
		opacity: 1;
		background: rgba(255, 255, 255, 0.5);
		transform: scale(1.05);
	}
</style>

<style>
	:root {
		--bg-color: #ffe6ea;
		--primary: #ff4d6d;
		--secondary: #ff8fa3;
		--text: #590d22;
		--white: #ffffff;
		--glass-bg: rgba(255, 255, 255, 0.65);
		--glass-border: rgba(255, 255, 255, 0.8);
	}

	body {
		margin: 0;
		font-family: 'Inter', sans-serif;
		background: linear-gradient(135deg, var(--bg-color) 0%, #ffc2d1 100%);
		min-height: 100vh;
		display: flex;
		justify-content: center;
		align-items: center;
		overflow: hidden; /* Force one-page feel */
	}

	/* COMPACT MOBILE OPTIMIZATIONS */
	@media (max-width: 600px) {
		main { padding: 1rem; width: 100%; }
		.card { padding: 1.5rem 1rem !important; }
		
		.title { font-size: 1.8rem !important; margin-bottom: 0.5rem !important; }
		.subtitle { font-size: 1rem !important; margin-bottom: 1rem !important; }
		.question-text { font-size: 1.2rem !important; margin-bottom: 1rem !important; }
		
		/* Shrink GIF on mobile to save space */
		.question-gif { height: 130px !important; }
		.feedback-gif { height: 130px !important; }
		
		/* Ensure buttons fit well */
		.options-grid { gap: 0.8rem !important; }
		.option-btn { 
			padding: 0.8rem !important; 
			min-height: 60px !important; 
			font-size: 0.9rem !important; 
		}
	}

	.hearts-container {
		position: fixed;
		top: 0; left: 0; width: 100%; height: 100%;
		pointer-events: none; z-index: 1;
	}

	main {
		z-index: 10;
		padding: 1.5rem; /* Reduced padding for mobile */
		width: 100%;
		max-width: 600px; /* Slightly wider for 2x2 grid */
		position: relative;
	}

	.card {
		background: var(--glass-bg);
		backdrop-filter: blur(12px);
		border-radius: 24px;
		padding: 2.5rem 2rem;
		box-shadow: 0 8px 32px rgba(255, 77, 109, 0.2);
		border: 1px solid var(--glass-border);
		text-align: center;
		transition: all 0.5s ease;
		animation: fadeIn 0.5s ease-out;
		width: 100%;
		box-sizing: border-box;
	}

	@keyframes fadeIn {
		from { opacity: 0; transform: translateY(20px); }
		to { opacity: 1; transform: translateY(0); }
	}

	.hidden {
		display: none !important;
	}

	.title {
		font-family: 'Pacifico', cursive;
		font-size: 2.2rem; /* Adjusted for better fit */
		color: var(--primary);
		margin: 0 0 1rem 0;
		line-height: 1.2;
		text-shadow: 2px 2px 0px rgba(255,255,255,0.5);
	}

	.subtitle {
		font-size: 1.1rem;
		color: var(--text);
		margin-bottom: 2rem;
		font-weight: 500;
	}

	/* QUIZ STYLES - MOVED TO GLOBAL FOR DYNAMIC CONTENT */
	
	/* CALCULATING STYLES */
	.love-meter-container {
		width: 100%;
		height: 30px;
		background: rgba(255, 255, 255, 0.5);
		border-radius: 15px;
		margin: 2rem 0;
		overflow: hidden;
		position: relative;
		border: 2px solid var(--white);
	}

	.love-meter-fill {
		height: 100%;
		background: linear-gradient(90deg, var(--secondary), var(--primary));
		width: 0%;
		display: flex;
		align-items: center;
		justify-content: center;
		color: white;
		font-weight: bold;
		font-size: 0.9rem;
		transition: width 0.1s linear;
	}

	.fun-fact-box {
		background: rgba(255, 255, 255, 0.4);
		border-radius: 12px;
		padding: 1rem;
		margin-top: 1.5rem;
		border: 1px dashed var(--secondary);
		text-align: left;
	}

	.fun-fact-box h3 {
		font-size: 1rem;
		color: var(--primary);
		margin: 0 0 0.5rem 0;
		display: flex;
		align-items: center;
		gap: 0.5rem;
	}

	.fun-fact-box p {
		font-size: 0.9rem;
		color: var(--text);
		margin: 0;
		font-style: italic;
		line-height: 1.4;
	}

	/* PROPOSAL STYLES */
	.badge {
		display: inline-block;
		background: #ffecf0;
		color: var(--primary);
		padding: 0.5rem 1rem;
		border-radius: 20px;
		font-weight: bold;
		font-size: 0.9rem;
		margin-bottom: 1rem;
		border: 1px solid var(--secondary);
		animation: pulse 2s infinite;
	}

	@keyframes pulse {
		0% { transform: scale(1); }
		50% { transform: scale(1.05); }
		100% { transform: scale(1); }
	}

	.gif-container {
		margin-bottom: 2rem;
		height: 200px; 
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.gif-container img {
		max-height: 100%;
		max-width: 100%;
		border-radius: 12px;
		box-shadow: 0 4px 12px rgba(0,0,0,0.1);
	}

	.success-gif {
		height: 160px;
		width: auto;
		margin: 0 auto;
		display: block;
		border-radius: 16px;
		margin-top: 1rem;
		box-shadow: 0 4px 12px rgba(0,0,0,0.1);
	}

	.save-date-text {
		font-weight: 600;
		color: var(--primary);
		margin: 1.5rem 0 0.5rem 0;
		font-size: 1.1rem;
	}
</style>
